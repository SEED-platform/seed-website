

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Migrations &mdash; SEED Platform 2.19.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Translating SEED" href="translation.html" />
    <link rel="prev" title="Developer Resources" href="developer_resources.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SEED Platform
          

          
          </a>

          
            
            
              <div class="version">
                2.19.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_model.html">Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_quality.html">Data Quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapping.html">Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="matching.html">Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developer_resources.html">Developer Resources</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Migrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#version-develop">Version Develop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-19-0">Version 2.19.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-18-1">Version 2.18.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-18-0">Version 2.18.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-17-4">Version 2.17.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-17-3">Version 2.17.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-17-2">Version 2.17.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-17-1">Version 2.17.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-17-0">Version 2.17.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-16-0">Version 2.16.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-15-2">Version 2.15.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-15-1">Version 2.15.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-15-0">Version 2.15.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-14-0">Version 2.14.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-13-0">Version 2.13.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-12-0-2-12-4">Version 2.12.0 - 2.12.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-11-0">Version 2.11.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-10-0">Version 2.10.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-7-3-to-2-9-0">Version 2.7.3 to 2.9.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-7-2">Version 2.7.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-7-1">Version 2.7.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-7-0">Version 2.7.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-6-1">Version 2.6.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-6-0">Version 2.6.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#docker-based-deployment">Docker-based Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ubuntu">Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#max-osx">Max OSX</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-5-2">Version 2.5.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-5-1">Version 2.5.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-2-5-0">Version 2.5.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Docker-based Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#development">Development</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="translation.html">Translating SEED</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#general-notes">General Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#django-notes">Django Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#nginx-notes">NginX Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#angularjs-integration-notes">AngularJS Integration Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#bedes-compliance-and-managing-columns">BEDES Compliance and Managing Columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#resetting-the-database">Resetting the Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#restoring-a-database-dump">Restoring a Database Dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#migrating-the-database">Migrating the Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#building-documentation">Building Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#contribution-instructions-best-practices">Contribution Instructions / Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_resources.html#release-instructions">Release Instructions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SEED Platform</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="developer_resources.html">Developer Resources</a> &raquo;</li>
        
      <li>Migrations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="migrations">
<h1>Migrations<a class="headerlink" href="#migrations" title="Permalink to this headline">¶</a></h1>
<p>Django handles the migration of the database very well; however, there are various changes to SEED that may require some custom (manual) migrations. The migration documenation includes the required changes based on deployment and development for each release.</p>
<section id="version-develop">
<h2>Version Develop<a class="headerlink" href="#version-develop" title="Permalink to this headline">¶</a></h2>
<p>In order to support Redis passwords, the configuration of the Redis/Celery settings changed a bit.
You will need to add the following to your local_untracked.py configuration file. If you are using
Docker then you will not need to do this.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="n">CELERY_BROKER_URL</span>
</pre></div>
</div>
<p>If you are using a password, then in your local_untracked.py configuration, add the password to
the CACHES configuration option. Your final configuration should look like the following in your
local_untracked.py file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;redis_cache.cache.RedisCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1:6379&quot;</span><span class="p">,</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;DB&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s1">&#39;TIMEOUT&#39;</span><span class="p">:</span> <span class="mi">300</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">CELERY_BROKER_URL</span> <span class="o">=</span> <span class="s1">&#39;redis://:</span><span class="si">%s</span><span class="s1">@</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
    <span class="n">CACHES</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">][</span><span class="s1">&#39;OPTIONS&#39;</span><span class="p">][</span><span class="s1">&#39;PASSWORD&#39;</span><span class="p">],</span>
    <span class="n">CACHES</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">][</span><span class="s1">&#39;LOCATION&#39;</span><span class="p">],</span>
    <span class="n">CACHES</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">][</span><span class="s1">&#39;OPTIONS&#39;</span><span class="p">][</span><span class="s1">&#39;DB&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="n">CELERY_BROKER_URL</span>
<span class="n">CELERY_TASK_DEFAULT_QUEUE</span> <span class="o">=</span> <span class="s1">&#39;seed-local&#39;</span>
<span class="n">CELERY_TASK_QUEUES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">Queue</span><span class="p">(</span>
        <span class="n">CELERY_TASK_DEFAULT_QUEUE</span><span class="p">,</span>
        <span class="n">Exchange</span><span class="p">(</span><span class="n">CELERY_TASK_DEFAULT_QUEUE</span><span class="p">),</span>
        <span class="n">routing_key</span><span class="o">=</span><span class="n">CELERY_TASK_DEFAULT_QUEUE</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="version-2-19-0">
<h2>Version 2.19.0<a class="headerlink" href="#version-2-19-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-18-1">
<h2>Version 2.18.1<a class="headerlink" href="#version-2-18-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-18-0">
<h2>Version 2.18.0<a class="headerlink" href="#version-2-18-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-17-4">
<h2>Version 2.17.4<a class="headerlink" href="#version-2-17-4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-17-3">
<h2>Version 2.17.3<a class="headerlink" href="#version-2-17-3" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-17-2">
<h2>Version 2.17.2<a class="headerlink" href="#version-2-17-2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-17-1">
<h2>Version 2.17.1<a class="headerlink" href="#version-2-17-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-17-0">
<h2>Version 2.17.0<a class="headerlink" href="#version-2-17-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-16-0">
<h2>Version 2.16.0<a class="headerlink" href="#version-2-16-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-15-2">
<h2>Version 2.15.2<a class="headerlink" href="#version-2-15-2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no migrations needed for this version.</p></li>
</ul>
</section>
<section id="version-2-15-1">
<h2>Version 2.15.1<a class="headerlink" href="#version-2-15-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no migrations needed for this version.</p></li>
</ul>
</section>
<section id="version-2-15-0">
<h2>Version 2.15.0<a class="headerlink" href="#version-2-15-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-14-0">
<h2>Version 2.14.0<a class="headerlink" href="#version-2-14-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-13-0">
<h2>Version 2.13.0<a class="headerlink" href="#version-2-13-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-12-0-2-12-4">
<h2>Version 2.12.0 - 2.12.4<a class="headerlink" href="#version-2-12-0-2-12-4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-11-0">
<h2>Version 2.11.0<a class="headerlink" href="#version-2-11-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-10-0">
<h2>Version 2.10.0<a class="headerlink" href="#version-2-10-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-7-3-to-2-9-0">
<h2>Version 2.7.3 to 2.9.0<a class="headerlink" href="#version-2-7-3-to-2-9-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The migrations should work without additional support. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-7-2">
<h2>Version 2.7.2<a class="headerlink" href="#version-2-7-2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The migrations should work without additional support. Simply run <cite>./manage.py migrate</cite>. There are no manual migrations needed.</p></li>
<li><p>Note the <strong>Important Note</strong> in Version 2.7.1 migration below which may require the need to run a “fake” migration</p></li>
</ul>
</section>
<section id="version-2-7-1">
<h2>Version 2.7.1<a class="headerlink" href="#version-2-7-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no special migrations needed for this version. Simply run <cite>./manage.py migrate</cite>.</p></li>
</ul>
<p><strong>Important Note:</strong></p>
<p>If upgrading from <cite>&lt; 2.7.0</cite> to <cite>&gt;= 2.7.1</cite> you may encounter a failed migration with <code class="docutils literal notranslate"><span class="pre">0118_match_merge_link_all_orgs</span></code>.  This is expected if the database is several versions behind, and it effectively reorders migration 118 to run after all other migrations have completed to prepare your database to recognize properties and taxlots across multiple cycles.  Run the following code manually to fully migrate:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">./manage.py</span> <span class="pre">migrate</span> <span class="pre">--fake</span> <span class="pre">seed</span> <span class="pre">0118_match_merge_link_all_orgs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./manage.py</span> <span class="pre">migrate</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./manage.py</span> <span class="pre">shell</span></code></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">seed.lib.superperms.orgs.models</span> <span class="kn">import</span> <span class="n">Organization</span>
<span class="kn">from</span> <span class="nn">seed.utils.match</span> <span class="kn">import</span> <span class="n">whole_org_match_merge_link</span>

<span class="k">for</span> <span class="n">org</span> <span class="ow">in</span> <span class="n">Organization</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
    <span class="n">whole_org_match_merge_link</span><span class="p">(</span><span class="n">org</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">&#39;PropertyState&#39;</span><span class="p">)</span>
    <span class="n">whole_org_match_merge_link</span><span class="p">(</span><span class="n">org</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">&#39;TaxLotState&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="version-2-7-0">
<h2>Version 2.7.0<a class="headerlink" href="#version-2-7-0" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This migration will run a match/merge/pair/link method upon migration. Make sure to run the migration manually and not inside of the docker container using the ./deploy.sh script.</p></li>
<li><p>Make sure to backup the database before performing the migration.</p></li>
<li><p>Run <cite>./manage.py migrate</cite>.</p></li>
</ul>
</section>
<section id="version-2-6-1">
<h2>Version 2.6.1<a class="headerlink" href="#version-2-6-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The migrations should work without additional support. Simply run <cite>./manage.py migrate</cite>. There are no manual migrations needed for the 2.6.1 release.</p></li>
</ul>
</section>
<section id="version-2-6-0">
<h2>Version 2.6.0<a class="headerlink" href="#version-2-6-0" title="Permalink to this headline">¶</a></h2>
<p>Version 2.6.0 includes support for meters and time series data storage. In order to use this release
you must first install <a class="reference external" href="https://docs.timescale.com/v1.2/getting-started">TimescaleDB</a>.</p>
<section id="docker-based-deployment">
<h3>Docker-based Deployment<a class="headerlink" href="#docker-based-deployment" title="Permalink to this headline">¶</a></h3>
<p>Docker-based deployments shouldn’t require running any additional commands for installation. The
timescaledb installation will happen automatically when updating the postgres container. Also,
the installation of the extension occurs in a Django migration.</p>
</section>
<section id="ubuntu">
<h3>Ubuntu<a class="headerlink" href="#ubuntu" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo add-apt-repository ppa:timescale/timescaledb-ppa</span>
<span class="go">sudo apt update</span>
<span class="go">sudo apt install timescaledb-postgresql-10</span>
<span class="go">sudo timescaledb-tune</span>
<span class="go">sudo service postgresql restart</span>
</pre></div>
</div>
</section>
<section id="max-osx">
<h3>Max OSX<a class="headerlink" href="#max-osx" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">brew tap timescale/tap</span>
<span class="go">brew install timescaledb</span>
<span class="go">/usr/local/bin/timescaledb_move.sh</span>
<span class="go">timescaledb-tune</span>
<span class="go">brew services restart postgresql</span>
</pre></div>
</div>
</section>
</section>
<section id="version-2-5-2">
<h2>Version 2.5.2<a class="headerlink" href="#version-2-5-2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are no manual migrations that are needed. The <cite>./manage.py migrate</cite> command may take awhile</p></li>
</ul>
<p>to run since the migration requires the recalculation of all the normalized addresses to parse
bldg correct and to cast the result as a string and not a bytestring.</p>
</section>
<section id="version-2-5-1">
<h2>Version 2.5.1<a class="headerlink" href="#version-2-5-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The migrations should work by simply running <cite>./manage.py migrate</cite>. There are no manual migrations needed for the 2.5.1 release.</p></li>
</ul>
</section>
<section id="version-2-5-0">
<h2>Version 2.5.0<a class="headerlink" href="#version-2-5-0" title="Permalink to this headline">¶</a></h2>
<section id="id1">
<h3>Docker-based Deployment<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Add the MapQuest API key to your organization.</p></li>
<li><p>On deployment, the error below is indicative that you need to install the extensions in the postgres database. Run <cite>docker exec &lt;postgres_container_id&gt; update-postgis.sh</cite>.</p>
<blockquote>
<div><p>django.db.utils.OperationalError: could not open extension control file “/usr/share/postgresql/11/extension/postgis.control”: No such file or directory</p>
</div></blockquote>
</li>
<li><p>If you are using a copied version of the docker-compose.yml file, then you need to change <cite>127.0.0.1:5000/postgres</cite> to <cite>127.0.0.1:5000/postgres-seed</cite></p></li>
</ul>
</section>
<section id="development">
<h3>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>Delete</strong> your bower directory <cite>rm -rf seed/static/vendors</cite>.</p></li>
<li><p><strong>Delete</strong> your css directory <cite>rm -rf seed/static/seed/css</cite>.</p></li>
<li><p><strong>Remove</strong> these lines from <cite>local_untracked.py</cite> if you have them.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DEFAULT_FILE_STORAGE</span> <span class="o">=</span> <span class="s1">&#39;django.core.files.storage.FileSystemStorage&#39;</span>
<span class="n">STATICFILES_STORAGE</span> <span class="o">=</span> <span class="n">DEFAULT_FILE_STORAGE</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Run <cite>pip3 install -r requirements/local.txt</cite>.</p></li>
<li><p>Run <cite>npm install</cite> from root checkout of SEED.</p></li>
<li><p>If testing geocoding, then sign up for as a <a class="reference external" href="https://developer.mapquest.com/plan_purchase/steps/business_edition/business_edition_free/register">MapQuest Developer</a> and create a new <a class="reference external" href="https://developer.mapquest.com/user/me/apps">MapQuest Key</a>.</p></li>
<li><p>Add the key to the organization that you are using in development.</p></li>
<li><p><strong>Update</strong> your DATABASES engine to be <cite>django.contrib.gis.db.backends.postgis</cite></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.contrib.gis.db.backends.postgis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;seeddb&#39;</span><span class="p">,</span>
        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;seeduser&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;seedpass&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="s1">&#39;5432&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">./manage.py</span> <span class="pre">migrate</span></code></p></li>
</ul>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="translation.html" class="btn btn-neutral float-right" title="Translating SEED" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="developer_resources.html" class="btn btn-neutral float-left" title="Developer Resources" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, 2023, Alliance for Sustainable Energy, LLC, and other contributors.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>